os: osx
osx_image: xcode10

before_script:
  - brew install bazel
  - git clone https://github.com/tensorflow/tensorflow

env:
  global:
    - PYTHON_BIN_PATH="/usr/local/opt/python@2/bin/python2.7"
    - TF_NEED_HDFS=0
    - TF_NEED_CUDA=0
    - TF_NEED_ROCM=0
    - TF_NEED_OPENCL_SYCL=0
    - TF_NEED_MKL=0
    - COMPUTECPP_PATH="/usr/local"

script:
  - cd tensorflow
 # - wget https://gist.githubusercontent.com/itsbalamurali/6ab3860435b440d17cdc2fad8dc158cf/raw/f61e74bb208ff4a7e99f950dd5fc109867f6f32a/.tf_configure.bazelrc -O .tf_configure.bazelrc
  - ./configure
  - bazel build --config=monolithic //tensorflow:libtensorflow_cc.so

addons:
  homebrew:
    taps:
      - bazelbuild/tap
      - homebrew/cask-versions
    casks: 
      - java8
